<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 19 Tidying | Data Analysis for Researchers AY2022</title>
<meta name="author" content="Hiroshi Suzuki">
<meta name="description" content="19.1 Setup library(tidyverse) #&gt; ── Attaching packages ─────────────────── tidyverse 1.3.2 ── #&gt; ✔ ggplot2 3.4.0   ✔ purrr  1.0.0 #&gt; ✔ tibble 3.1.8   ✔ dplyr  1.0.10 #&gt; ✔ tidyr  1.2.1   ✔ stringr...">
<meta name="generator" content="bookdown 0.31 with bs4_book()">
<meta property="og:title" content="Chapter 19 Tidying | Data Analysis for Researchers AY2022">
<meta property="og:type" content="book">
<meta property="og:url" content="https://icu-hsuzuki.github.io/da4r2022/tidying.html">
<meta property="og:description" content="19.1 Setup library(tidyverse) #&gt; ── Attaching packages ─────────────────── tidyverse 1.3.2 ── #&gt; ✔ ggplot2 3.4.0   ✔ purrr  1.0.0 #&gt; ✔ tibble 3.1.8   ✔ dplyr  1.0.10 #&gt; ✔ tidyr  1.2.1   ✔ stringr...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 19 Tidying | Data Analysis for Researchers AY2022">
<meta name="twitter:description" content="19.1 Setup library(tidyverse) #&gt; ── Attaching packages ─────────────────── tidyverse 1.3.2 ── #&gt; ✔ ggplot2 3.4.0   ✔ purrr  1.0.0 #&gt; ✔ tibble 3.1.8   ✔ dplyr  1.0.10 #&gt; ✔ tidyr  1.2.1   ✔ stringr...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.2/transition.js"></script><script src="libs/bs3compat-0.4.2/tabs.js"></script><script src="libs/bs3compat-0.4.2/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.6.1/htmlwidgets.js"></script><link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="libs/datatables-binding-0.26/datatables.js"></script><link href="libs/dt-core-1.12.1/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="libs/dt-core-1.12.1/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="libs/dt-core-1.12.1/js/jquery.dataTables.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<style type="text/css">
    /* Used with Pandoc 2.11+ new --citeproc when CSL is used */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
        }
    .hanging div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Data Analysis for Researchers AY2022</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About</a></li>
<li class="book-part">PART I. INTRODUCTION</li>
<li><a class="" href="intro.html"><span class="header-section-number">1</span> About the Course</a></li>
<li><a class="" href="randrstudio.html"><span class="header-section-number">2</span> R and R Studio</a></li>
<li><a class="" href="tidyverse.html"><span class="header-section-number">3</span> tidyverse</a></li>
<li><a class="" href="rmarkdown.html"><span class="header-section-number">4</span> R Markdown</a></li>
<li><a class="" href="dplyr.html"><span class="header-section-number">5</span> dplyr</a></li>
<li><a class="" href="a2resp.html"><span class="header-section-number">6</span> Assignment Two and Responses</a></li>
<li><a class="" href="wdidata.html"><span class="header-section-number">7</span> WDI</a></li>
<li><a class="" href="ggplot2.html"><span class="header-section-number">8</span> ggplot2</a></li>
<li><a class="" href="a3resp.html"><span class="header-section-number">9</span> Assignment Three</a></li>
<li><a class="" href="tidy.html"><span class="header-section-number">10</span> tidyr</a></li>
<li><a class="" href="workflow.html"><span class="header-section-number">11</span> Workflow</a></li>
<li><a class="" href="a4resp.html"><span class="header-section-number">12</span> Assignment Four</a></li>
<li><a class="" href="model.html"><span class="header-section-number">13</span> Linear Model</a></li>
<li><a class="" href="roundups.html"><span class="header-section-number">14</span> Roudups</a></li>
<li><a class="" href="a5resp.html"><span class="header-section-number">15</span> Assignment Five</a></li>
<li class="book-part">PART II EDA BASICS</li>
<li><a class="" href="eda.html"><span class="header-section-number">16</span> Exploratory Data analysis</a></li>
<li><a class="" href="importing.html"><span class="header-section-number">17</span> Importing</a></li>
<li><a class="" href="transforming.html"><span class="header-section-number">18</span> Transforming</a></li>
<li><a class="active" href="tidying.html"><span class="header-section-number">19</span> Tidying</a></li>
<li><a class="" href="visualizing.html"><span class="header-section-number">20</span> Visualizing</a></li>
<li><a class="" href="modeling.html"><span class="header-section-number">21</span> Modeling</a></li>
<li><a class="" href="communicating.html"><span class="header-section-number">22</span> Communicating</a></li>
<li class="book-part">PART III OPEN PUBLIC DATA</li>
<li><a class="" href="worldbank.html"><span class="header-section-number">23</span> World Bank</a></li>
<li><a class="" href="owid.html"><span class="header-section-number">24</span> Our World in Data</a></li>
<li><a class="" href="oecd.html"><span class="header-section-number">25</span> OECD</a></li>
<li><a class="" href="undata.html"><span class="header-section-number">26</span> UN Data</a></li>
<li><a class="" href="wir.html"><span class="header-section-number">27</span> World Inequality Report</a></li>
<li class="book-part">APPENDIX</li>
<li><a class="" href="histdata.html"><span class="header-section-number">A</span> HistData</a></li>
<li><a class="" href="covid19.html"><span class="header-section-number">B</span> Covid 19</a></li>
<li><a class="" href="bookdown.html"><span class="header-section-number">C</span> Bookdown</a></li>
<li><a class="" href="template.html"><span class="header-section-number">D</span> Template</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://icu-hsuzuki.github.io/da4r2022/">View book source <i class="fab fa-gitlab"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="tidying" class="section level1" number="19">
<h1>
<span class="header-section-number">19</span> Tidying<a class="anchor" aria-label="anchor" href="#tidying"><i class="fas fa-link"></i></a>
</h1>
<div id="setup-3" class="section level2" number="19.1">
<h2>
<span class="header-section-number">19.1</span> Setup<a class="anchor" aria-label="anchor" href="#setup-3"><i class="fas fa-link"></i></a>
</h2>
<div class="sourceCode" id="cb523"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; ── Attaching packages ─────────────────── tidyverse 1.3.2 ──</span></span>
<span><span class="co">#&gt; ✔ ggplot2 3.4.0      ✔ purrr   1.0.0 </span></span>
<span><span class="co">#&gt; ✔ tibble  3.1.8      ✔ dplyr   1.0.10</span></span>
<span><span class="co">#&gt; ✔ tidyr   1.2.1      ✔ stringr 1.5.0 </span></span>
<span><span class="co">#&gt; ✔ readr   2.1.3      ✔ forcats 0.5.2 </span></span>
<span><span class="co">#&gt; ── Conflicts ────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">#&gt; ✖ dplyr::filter() masks stats::filter()</span></span>
<span><span class="co">#&gt; ✖ dplyr::lag()    masks stats::lag()</span></span></code></pre></div>
</div>
<div id="references-of-tidyr-1" class="section level2" number="19.2">
<h2>
<span class="header-section-number">19.2</span> References of <code>tidyr</code><a class="anchor" aria-label="anchor" href="#references-of-tidyr-1"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Textbook: <a href="https://r4ds.had.co.nz/tidy-data.html#tidy-data">R for Data Science,Tidy Data</a>
</li>
</ul>
<div id="rstudio-primers-see-references-in-moodle-at-the-bottom-3" class="section level3" number="19.2.1">
<h3>
<span class="header-section-number">19.2.1</span> RStudio Primers: See References in Moodle at the bottom<a class="anchor" aria-label="anchor" href="#rstudio-primers-see-references-in-moodle-at-the-bottom-3"><i class="fas fa-link"></i></a>
</h3>
<ol start="4" style="list-style-type: decimal">
<li>Tidy Your Data – <a href="https://r4ds.had.co.nz/wrangle-intro.html#wrangle-intro">r4ds: Wrangle, II</a>
</li>
</ol>
<ul>
<li><a href="https://rstudio.cloud/learn/primers/4.1">Reshape Data - a bit old</a></li>
<li><a href="https://rstudio.cloud/learn/primers/4.2">Separate and Unite</a></li>
<li><a href="https://rstudio.cloud/learn/primers/4.3">Join Data Sets</a></li>
</ul>
<p>The first component, ‘Reshape Data’ deals with <code>pivot_longer</code> and <code>pivot_wider</code>. However, it uses an older version of these functions calls <code>gather</code> and <code>spread</code>.</p>
</div>
</div>
<div id="variables-values-and-observations-definitions-1" class="section level2" number="19.3">
<h2>
<span class="header-section-number">19.3</span> Variables, values, and observations: Definitions<a class="anchor" aria-label="anchor" href="#variables-values-and-observations-definitions-1"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>A <strong>variable</strong> is a quantity, quality, or property that you can measure.</li>
<li>A <strong>value</strong> is the state of a variable when you measure it. The value of a variable may change from measurement to measurement.</li>
<li>An <strong>observation</strong> or <strong>case</strong> is a set of measurements made under similar conditions (you usually make all of the measurements in an observation at the same time and on the same object). An observation will contain several values, each associated with a different variable. I’ll sometimes refer to an observation as a case or data point.</li>
<li>
<strong>Tabular data</strong> is a table of values, each associated with a variable and an observation. Tabular data is tidy if each value is placed in its own cell, each variable in its own column, and each observation in its own row.</li>
<li>So far, all of the data that you’ve seen has been tidy. In real-life, most data isn’t tidy, so we’ll come back to these ideas again in Data Wrangling.</li>
</ul>
</div>
<div id="tidy-data-1" class="section level2" number="19.4">
<h2>
<span class="header-section-number">19.4</span> Tidy Data<a class="anchor" aria-label="anchor" href="#tidy-data-1"><i class="fas fa-link"></i></a>
</h2>
<blockquote>
<p>“Data comes in many formats, but R prefers just one: tidy data.” — Garrett Grolemund</p>
</blockquote>
<p>Data can come in a variety of formats, but one format is easier to use in R than the others. This format is known as tidy data. A data set is tidy if:</p>
<ol style="list-style-type: decimal">
<li>Each variable is in its own column</li>
<li>Each observation is in its own row</li>
<li>Each value is in its own cell (this follows from #1 and #2)</li>
</ol>
<blockquote>
<p>“Tidy data sets are all alike; but every messy data set is messy in its own way.” — Hadley Wickham</p>
</blockquote>
<blockquote>
<p>“all happy families are all alike; each unhappy family is unhappy in its own way” - Tolstoy’s Anna Karenina</p>
</blockquote>
</div>
<div id="tidyr-basics-1" class="section level2" number="19.5">
<h2>
<span class="header-section-number">19.5</span> <code>tidyr</code> Basics<a class="anchor" aria-label="anchor" href="#tidyr-basics-1"><i class="fas fa-link"></i></a>
</h2>
<p>Let us look at the figure in <a href="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png">R4DS</a>.</p>
<div class="inline-figure"><img src="data/tidy-1.png" width="100%"></div>
<ol style="list-style-type: decimal">
<li>Each variable is in its own column</li>
<li>Each observation is in its own row</li>
</ol>
</div>
<div id="pivot-data-from-wide-to-long" class="section level2" number="19.6">
<h2>
<span class="header-section-number">19.6</span> Pivot data from wide to long:<a class="anchor" aria-label="anchor" href="#pivot-data-from-wide-to-long"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html"><code>pivot_longer()</code></a></p>
<pre><code>pivot_longer(data, cols = &lt;columns to pivot into longer format&gt;,
  names_to = &lt;name of the new character column&gt;, # e.g. "group", "category", "class"
  values_to = &lt;name of the column the values of cells go to&gt;) # e.g. "value", "n"</code></pre>
</div>
<div id="pivot-data-from-long-to-wide-1" class="section level2" number="19.7">
<h2>
<span class="header-section-number">19.7</span> Pivot data from long to wide:<a class="anchor" aria-label="anchor" href="#pivot-data-from-long-to-wide-1"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html"><code>pivot_wider()</code></a>
In Console: vignette(“pivot”)</p>
<pre><code>pivot_wider(data, 
  names_from = &lt;name of the column (or columns) to get the name of the output column&gt;,
  values_from = &lt;name of the column to get the value of the output&gt;) </code></pre>
</div>
<div id="filtering-joins" class="section level2" number="19.8">
<h2>
<span class="header-section-number">19.8</span> Filtering joins<a class="anchor" aria-label="anchor" href="#filtering-joins"><i class="fas fa-link"></i></a>
</h2>
<p><a href="https://dplyr.tidyverse.org/reference/filter-joins.html"><code>anti_join()</code>, <code>semi_join()</code></a></p>
<ul>
<li>
<code>anti_join(x,y, ...)</code>: return all rows from x without a match in y.</li>
<li>
<code>semi_join(x,y, ...)</code>: return all rows from x with a match in y.</li>
</ul>
<p>Check <code>dplyr</code> cheat sheet, and Posit Primers Tidy Data.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="transforming.html"><span class="header-section-number">18</span> Transforming</a></div>
<div class="next"><a href="visualizing.html"><span class="header-section-number">20</span> Visualizing</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#tidying"><span class="header-section-number">19</span> Tidying</a></li>
<li><a class="nav-link" href="#setup-3"><span class="header-section-number">19.1</span> Setup</a></li>
<li>
<a class="nav-link" href="#references-of-tidyr-1"><span class="header-section-number">19.2</span> References of tidyr</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#rstudio-primers-see-references-in-moodle-at-the-bottom-3"><span class="header-section-number">19.2.1</span> RStudio Primers: See References in Moodle at the bottom</a></li></ul>
</li>
<li><a class="nav-link" href="#variables-values-and-observations-definitions-1"><span class="header-section-number">19.3</span> Variables, values, and observations: Definitions</a></li>
<li><a class="nav-link" href="#tidy-data-1"><span class="header-section-number">19.4</span> Tidy Data</a></li>
<li><a class="nav-link" href="#tidyr-basics-1"><span class="header-section-number">19.5</span> tidyr Basics</a></li>
<li><a class="nav-link" href="#pivot-data-from-wide-to-long"><span class="header-section-number">19.6</span> Pivot data from wide to long:</a></li>
<li><a class="nav-link" href="#pivot-data-from-long-to-wide-1"><span class="header-section-number">19.7</span> Pivot data from long to wide:</a></li>
<li><a class="nav-link" href="#filtering-joins"><span class="header-section-number">19.8</span> Filtering joins</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://icu-hsuzuki.github.io/da4r2022//blob/master/24-tidying.Rmd">View source <i class="fab fa-gitlab"></i></a></li>
          <li><a id="book-edit" href="https://icu-hsuzuki.github.io/da4r2022//edit/master/24-tidying.Rmd">Edit this page <i class="fab fa-gitlab"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Data Analysis for Researchers AY2022</strong>" was written by Hiroshi Suzuki. It was last built on 2023-02-11.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
